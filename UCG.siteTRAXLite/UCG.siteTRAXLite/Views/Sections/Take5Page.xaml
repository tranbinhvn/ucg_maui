<?xml version="1.0" encoding="utf-8" ?>
<views:MasterContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="UCG.siteTRAXLite.Views.Sections.Take5Page"
             xmlns:views="clr-namespace:UCG.siteTRAXLite.Views"
             xmlns:customselectors="clr-namespace:UCG.siteTRAXLite.CustomSelectors"
             xmlns:converters="clr-namespace:UCG.siteTRAXLite.Converters"
             xmlns:customcontrols="clr-namespace:UCG.siteTRAXLite.CustomControls"
             xmlns:viewmodels="clr-namespace:UCG.siteTRAXLite.ViewModels.Sections"
             xmlns:material="http://schemas.enisn-projects.io/dotnet/maui/uraniumui/material"
             JobDetail="{Binding JobDetail}"
             PageTitle="{Binding PageTitle}"
             GoBackCommand="{Binding GoBackCommand}"
             NavigationPage.HasNavigationBar="False"
             NavigationPage.HasBackButton="False">
    <views:MasterContentPage.Resources>
        <converters:IndexToColorConverter x:Key="IndexToColorConverter"/>
        <converters:ActionLevelsConverter x:Key="ActionLevelsConverter"/>
        
        <!--Control Tab-->
        <DataTemplate x:Key="responseRadioSingle">
            <StackLayout BackgroundColor="{Binding ., Converter={StaticResource IndexToColorConverter}}" HorizontalOptions="FillAndExpand" Spacing="0" Padding="20">
                <Label  
                    Text="{Binding Title}" 
                    FontSize="16"
                    FontFamily="FS-Medium"
                    TextColor="{StaticResource VeryDarkBlue}"/>
                <material:RadioButtonGroupView 
                        HorizontalOptions="StartAndExpand"
                        VerticalOptions="FillAndExpand"
                        Orientation="Horizontal"
                        RadioButtonGroup.GroupName="{Binding Index}"
                        SelectedItem="{Binding Response}"
                        BindableLayout.ItemsSource="{Binding ResponseData}"
                        SelectedItemChanged="RadioButtonGroupView_SelectedItemChanged">
                    <BindableLayout.ItemTemplate>
                        <DataTemplate>
                            <material:RadioButton 
                                Value="{Binding .}"
                                CircleColor="{StaticResource MediumDarkBlue}"
                                Color="{StaticResource MediumDarkBlue}"
                                Margin="0,0,20,0">
                                <Label Text="{Binding Value}" TextColor="{StaticResource MediumDarkBlue}" FontFamily="FS-Medium" FontSize="20"></Label>
                            </material:RadioButton>
                        </DataTemplate>
                    </BindableLayout.ItemTemplate>
                </material:RadioButtonGroupView>
            </StackLayout>
        </DataTemplate>
        <DataTemplate x:Key="responseTake5SWMsModal">
            <StackLayout BackgroundColor="{Binding ., Converter={StaticResource IndexToColorConverter}}"  HorizontalOptions="FillAndExpand" Padding="20,0,0,0">
                <Label  
                Text="Selected SWMS" 
                FontSize="16"
                FontFamily="FS-Medium"
                VerticalTextAlignment="Center"
                Margin="10,0,0,0"
                TextColor="{StaticResource VeryDarkBlue}"/>
                <StackLayout
                    BindableLayout.ItemsSource="{Binding Responses}"
                    HorizontalOptions="FillAndExpand">
                    <BindableLayout.ItemTemplate>
                        <DataTemplate>
                            <StackLayout Orientation="Horizontal" >
                                <Label Margin="10,0,0,0">
                                    <Label.FormattedText>
                                        <FormattedString>
                                            <Span Text=" - " FontSize="16" FontFamily="FS-Medium" TextColor="{StaticResource VeryDarkBlue}"/>
                                            <Span Text="{Binding Value}" FontSize="16" FontFamily="FS-Medium" TextColor="{StaticResource VeryDarkBlue}"/>
                                        </FormattedString>
                                    </Label.FormattedText>
                                </Label>
                            </StackLayout>
                        </DataTemplate>
                    </BindableLayout.ItemTemplate>
                </StackLayout>
                <StackLayout Padding="10" Orientation="Horizontal" HorizontalOptions="FillAndExpand">
                    <ImageButton 
                    Source="icon_edit.png" 
                    BackgroundColor="{StaticResource MediumLightBlue}"
                    Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodels:Take5PageViewModel}}, Path=ShowSWMSModalCommand}"
                    CommandParameter="{Binding .}"
                    HorizontalOptions="Start"
                    Padding="5"
                    CornerRadius="5"/>
                    <Label  
                    Text="Edit SWMS" 
                    FontSize="18"
                    FontFamily="FS-Medium"
                    VerticalTextAlignment="Center"
                    Margin="20,0,0,0"
                    TextColor="{StaticResource VeryDarkBlue}"/>
                </StackLayout>
            </StackLayout>
        </DataTemplate>
        
        <!--Hazard Tab-->
        <DataTemplate x:Key="responseCheckboxSingle">
            <StackLayout HorizontalOptions="FillAndExpand" x:Name="checkboxSingleLayout" Padding="10,0,0,10">
                <FlexLayout 
                        HorizontalOptions="StartAndExpand" 
                        JustifyContent="SpaceAround"
                        AlignItems="Stretch"
                        Wrap="Wrap"
                        BindableLayout.ItemsSource="{Binding ResponseData}">
                    <BindableLayout.ItemTemplate>
                        <DataTemplate>
                            <StackLayout HorizontalOptions="Start" FlexLayout.AlignSelf="Start" FlexLayout.Grow="1" Orientation="Horizontal">
                                <material:CheckBox Type="Material" CornerRadius="0" IsChecked="{Binding IsChecked}" Color="{StaticResource MediumDarkBlue}" CheckChanged="CheckboxResponse_CheckedChanged"/>
                                <Label FontSize="20" FontFamily="FS-Light" FontAttributes="Bold" Text="{Binding Value}" HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand" VerticalTextAlignment="Center" LineBreakMode="WordWrap" TextColor="{StaticResource MediumDarkBlue}" />
                            </StackLayout>
                        </DataTemplate>
                    </BindableLayout.ItemTemplate>
                </FlexLayout>
            </StackLayout>
        </DataTemplate>
        <DataTemplate x:Key="responseUploadMultiple">
            <StackLayout HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand" Spacing="0" Padding="20">
                <StackLayout HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
                    <Label  
                    Text="{Binding Title}" 
                    FontSize="16"
                    HorizontalOptions="FillAndExpand"
                    FontFamily="FS-Medium"
                    TextColor="{StaticResource VeryDarkBlue}"/>
                    <Button 
                    Style="{StaticResource NormalButton}"
                    Clicked="BrowseFiles_Clicked"
                    Text="UPLOAD PHOTOS"
                    Margin="25,10,25,10"/>
                </StackLayout>
                <ListView 
                    ItemsSource="{Binding FilesUpload}" 
                    SelectionMode="None"
                    HorizontalOptions="FillAndExpand" 
                    VerticalOptions="FillAndExpand">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <ViewCell>
                                <StackLayout HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
                                    <StackLayout HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
                                        <StackLayout BackgroundColor="Transparent" HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
                                            <Grid HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="1*" />
                                                    <ColumnDefinition Width="2*" />
                                                    <ColumnDefinition Width="1*" />
                                                    <ColumnDefinition Width="1*" />
                                                    <ColumnDefinition Width="1*" />
                                                </Grid.ColumnDefinitions>
                                                <Image
                                                Grid.Column="0"
                                                HeightRequest="30"
                                                HorizontalOptions="StartAndExpand"
                                                Source="{Binding ImageSource}"
                                                WidthRequest="30" />
                                                <Label Grid.Column="1" FontFamily="FS-Medium" LineBreakMode="TailTruncation" Text="{Binding FileName}" VerticalOptions="CenterAndExpand" WidthRequest="50" />
                                                <Label Grid.Column="2" FontFamily="FS-Medium" Text="{Binding FileSizeInKB}" VerticalOptions="CenterAndExpand" />
                                                <StackLayout Grid.Column="3" VerticalOptions="CenterAndExpand">
                                                    <Label Text="100%" FontFamily="FS-Medium" HorizontalTextAlignment="Center"  VerticalOptions="CenterAndExpand" />
                                                    <ProgressBar HeightRequest="10" HorizontalOptions="FillAndExpand" Progress="100" ProgressColor="{StaticResource VeryDarkBlue}" VerticalOptions="FillAndExpand" />
                                                </StackLayout>
                                                <StackLayout Grid.Column="4" HorizontalOptions="FillAndExpand" Orientation="Horizontal">
                                                    <ImageButton
                                                        Grid.Column="2"
                                                        Source="icon_bin.png"
                                                        HeightRequest="45"
                                                        WidthRequest="45"
                                                        Padding="5"
                                                        Margin="0,0,5,0"
                                                        VerticalOptions="CenterAndExpand"
                                                        HorizontalOptions="EndAndExpand"
                                                        Clicked="RemoveFile_Clicked"
                                                        BackgroundColor="{StaticResource MediumLightBlue}"
                                                        CornerRadius="5">
                                                    </ImageButton>
                                                </StackLayout>
                                            </Grid>
                                        </StackLayout>
                                    </StackLayout>
                                </StackLayout>
                            </ViewCell>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </StackLayout>
        </DataTemplate>
        <DataTemplate x:Key="responseInputTextArea">
            <StackLayout HorizontalOptions="FillAndExpand" Spacing="0" Padding="20,0,20,20" Orientation="Horizontal">
                <Label Text="{Binding Level, Converter={StaticResource ActionLevelsConverter}}" Margin="0,0,10,0" VerticalOptions="FillAndExpand" FontSize="50" VerticalTextAlignment="Center" LineBreakMode="WordWrap">
                    <Label.Triggers>
                        <DataTrigger Binding="{Binding Level}" TargetType="Label" Value="0">
                            <Setter Property="IsVisible" Value="False" />
                        </DataTrigger>
                    </Label.Triggers>
                </Label>
                <StackLayout HorizontalOptions="FillAndExpand">
                    <Label  
                    Text="{Binding Title}" 
                    FontSize="16"
                    FontFamily="FS-Medium"
                    TextColor="{StaticResource VeryDarkBlue}"/>
                    <Border 
                        Stroke="{StaticResource VeryDarkBlue}"
                        StrokeThickness="1"
                        HeightRequest="60"
                        StrokeShape="Rectangle"
                        VerticalOptions="FillAndExpand"
                        HorizontalOptions="FillAndExpand">
                        <Editor 
                            Placeholder="Response" 
                            Text="{Binding Response.Value}" 
                            HorizontalOptions="FillAndExpand"
                            VerticalOptions="FillAndExpand"/>
                    </Border>
                </StackLayout>
            </StackLayout>
        </DataTemplate>
        
        <!--Submit Tab-->
        <DataTemplate x:Key="disableResponseRadioSingle">
            <StackLayout HorizontalOptions="FillAndExpand" Spacing="0" Padding="20">
                <Label  
                    Text="{Binding Title}" 
                    FontSize="16"
                    FontFamily="FS-Medium"
                    TextColor="{StaticResource VeryDarkBlue}"/>
                <Label Text="{Binding Response.Value}"/>
                <material:RadioButtonGroupView 
                        HorizontalOptions="StartAndExpand"
                        VerticalOptions="FillAndExpand"
                        Orientation="Horizontal"
                        RadioButtonGroup.GroupName="{Binding Index}"
                        SelectedItem="{Binding Response}"
                        BindableLayout.ItemsSource="{Binding ResponseData}"
                        SelectedItemChanged="RadioButtonGroupView_SelectedItemChanged">
                    <BindableLayout.ItemTemplate>
                        <DataTemplate>
                            <material:RadioButton 
                                Value="{Binding .}"
                                CircleColor="{StaticResource MediumDarkBlue}"
                                Color="{StaticResource MediumDarkBlue}"
                                IsDisabled="True"
                                Margin="0,0,20,0">
                                <Label Text="{Binding Value}" TextColor="{StaticResource MediumDarkBlue}" FontFamily="FS-Medium" FontSize="20"></Label>
                            </material:RadioButton>
                        </DataTemplate>
                    </BindableLayout.ItemTemplate>
                </material:RadioButtonGroupView>
            </StackLayout>
        </DataTemplate>
        <DataTemplate x:Key="disableResponseCheckboxSingle">
            <StackLayout HorizontalOptions="FillAndExpand">
                <FlexLayout 
                        HorizontalOptions="StartAndExpand" 
                        JustifyContent="SpaceAround"
                        AlignItems="Stretch"
                        Wrap="Wrap"
                        BindableLayout.ItemsSource="{Binding ResponseData}">
                    <BindableLayout.ItemTemplate>
                        <DataTemplate>
                            <StackLayout Padding="10" HorizontalOptions="Start" FlexLayout.AlignSelf="Start" FlexLayout.Grow="1" Orientation="Horizontal">
                                <material:CheckBox Type="Material" IsDisabled="True" CornerRadius="0" IsChecked="{Binding IsChecked}" Color="{StaticResource MediumDarkBlue}" CheckChanged="CheckboxResponse_CheckedChanged"/>
                                <Label FontSize="20" FontFamily="FS-Light" FontAttributes="Bold" Text="{Binding Value}" HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand" VerticalTextAlignment="Center" LineBreakMode="WordWrap" TextColor="{StaticResource MediumDarkBlue}" />
                            </StackLayout>
                        </DataTemplate>
                    </BindableLayout.ItemTemplate>
                </FlexLayout>
            </StackLayout>
        </DataTemplate>
        <DataTemplate x:Key="disableResponseUploadMultiple">
            <StackLayout HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand" Spacing="0" Padding="20">
                <StackLayout HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
                    <Label  
                        Text="{Binding Title}" 
                        FontSize="16"
                        HorizontalOptions="FillAndExpand"
                        FontFamily="FS-Medium"
                        TextColor="{StaticResource VeryDarkBlue}"/>
                    <Button 
                        Style="{StaticResource NormalButton}"
                        IsEnabled="False"
                        Clicked="BrowseFiles_Clicked"
                        Text="UPLOAD PHOTOS"
                        Margin="25,10,25,10">
                    </Button>
                </StackLayout>
                <ListView 
                    ItemsSource="{Binding FilesUpload}" 
                    SelectionMode="None"
                    HorizontalOptions="FillAndExpand" 
                    VerticalOptions="FillAndExpand"
                    HeightRequest="150">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <ViewCell>
                                <StackLayout HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
                                    <StackLayout HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
                                        <StackLayout BackgroundColor="Transparent" HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
                                            <Grid HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="1*" />
                                                    <ColumnDefinition Width="2*" />
                                                    <ColumnDefinition Width="2*" />
                                                    <ColumnDefinition Width="1*" />
                                                </Grid.ColumnDefinitions>
                                                <Image
                                                Grid.Column="0"
                                                HeightRequest="30"
                                                HorizontalOptions="StartAndExpand"
                                                Source="{Binding ImageSource}"
                                                WidthRequest="30" />
                                                <Label Grid.Column="1" FontFamily="FS-Medium" LineBreakMode="TailTruncation" Text="{Binding FileName}" VerticalOptions="CenterAndExpand" WidthRequest="50" />
                                                <Label Grid.Column="2" FontFamily="FS-Medium" Text="{Binding FileSizeInKB}" VerticalOptions="CenterAndExpand" />
                                                <StackLayout Grid.Column="3" VerticalOptions="CenterAndExpand">
                                                    <Label Text="100%" FontFamily="FS-Medium" HorizontalTextAlignment="Center"  VerticalOptions="CenterAndExpand" />
                                                    <ProgressBar HeightRequest="10" HorizontalOptions="FillAndExpand" Progress="100" ProgressColor="{StaticResource VeryDarkBlue}" VerticalOptions="FillAndExpand" />
                                                </StackLayout>
                                            </Grid>
                                        </StackLayout>
                                    </StackLayout>
                                </StackLayout>
                            </ViewCell>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </StackLayout>
        </DataTemplate>
        <DataTemplate x:Key="disableResponseInputTextArea">
            <StackLayout HorizontalOptions="FillAndExpand" Spacing="0" Padding="20,0,20,20" Orientation="Horizontal">
                <Label Text="{Binding Level, Converter={StaticResource ActionLevelsConverter}}" Margin="0,0,10,0" VerticalOptions="FillAndExpand" FontSize="50" VerticalTextAlignment="Center" LineBreakMode="WordWrap">
                    <Label.Triggers>
                        <DataTrigger Binding="{Binding Level}" TargetType="Label" Value="0">
                            <Setter Property="IsVisible" Value="False" />
                        </DataTrigger>
                    </Label.Triggers>
                </Label>
                <StackLayout HorizontalOptions="FillAndExpand">
                    <Label  
                    Text="{Binding Title}" 
                    FontSize="16"
                    FontFamily="FS-Medium"
                    TextColor="{StaticResource VeryDarkBlue}"/>
                    <Border 
                        Stroke="{StaticResource VeryDarkBlue}"
                        StrokeThickness="1"
                        HeightRequest="60"
                        StrokeShape="Rectangle"
                        VerticalOptions="FillAndExpand"
                        HorizontalOptions="FillAndExpand">
                        <Editor 
                            Text="{Binding Response.Value}"
                            IsEnabled="False"
                            HorizontalOptions="FillAndExpand"
                            VerticalOptions="FillAndExpand"/>
                    </Border>
                </StackLayout>
            </StackLayout>
        </DataTemplate>
        <DataTemplate x:Key="disableResponseTake5SWMsModal">
            <StackLayout HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand"  Padding="20,0,0,0">
                <Label  
                    Text="Selected SWMS" 
                    FontSize="16"
                    FontFamily="FS-Medium"
                    VerticalTextAlignment="Center"
                    Margin="10,0,0,0"
                    TextColor="{StaticResource VeryDarkBlue}"/>
                <StackLayout
                    BindableLayout.ItemsSource="{Binding Responses}"
                    HorizontalOptions="FillAndExpand"
                    VerticalOptions="FillAndExpand">
                    <BindableLayout.ItemTemplate>
                        <DataTemplate>
                            <StackLayout Orientation="Horizontal" >
                                <Label Margin="10,0,0,0">
                                    <Label.FormattedText>
                                        <FormattedString>
                                            <Span Text=" - " FontSize="16" FontFamily="FS-Medium" TextColor="{StaticResource VeryDarkBlue}"/>
                                            <Span Text="{Binding Value}" FontSize="16" FontFamily="FS-Medium" TextColor="{StaticResource VeryDarkBlue}"/>
                                        </FormattedString>
                                    </Label.FormattedText>
                                </Label>
                            </StackLayout>
                        </DataTemplate>
                    </BindableLayout.ItemTemplate>
                </StackLayout>
                <StackLayout Padding="10" Orientation="Horizontal" HorizontalOptions="FillAndExpand">
                    <ImageButton 
                        Source="icon_edit.png" 
                        BackgroundColor="{StaticResource MediumLightBlue}"
                        HorizontalOptions="Start"
                        Padding="5"
                        Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodels:Take5PageViewModel}}, Path=ShowSWMSModalCommand}"
                        CommandParameter="{Binding .}"
                        CornerRadius="5"/>
                    <Label  
                        Text="Edit SWMS" 
                        FontSize="18"
                        FontFamily="FS-Medium"
                        VerticalTextAlignment="Center"
                        Margin="20,0,0,0"
                        TextColor="{StaticResource VeryDarkBlue}"/>
                </StackLayout>
            </StackLayout>
        </DataTemplate>
        <DataTemplate x:Key="responseTake5SWMSSummary">
            <StackLayout HorizontalOptions="FillAndExpand"  VerticalOptions="FillAndExpand">
                <OnPlatform x:TypeArguments="View">
                    <On Platform="WinUI">
                        <StackLayout HorizontalOptions="FillAndExpand"  VerticalOptions="FillAndExpand">
                            <Label  
                                Text="Control &amp; Monitor" 
                                FontSize="18"
                                FontAttributes="Bold"
                                FontFamily="FS-Medium"
                                Margin="10,20,0,0"
                                TextColor="{StaticResource VeryDarkBlue}"/>
                            <StackLayout 
                                HorizontalOptions="FillAndExpand" 
                                VerticalOptions="FillAndExpand"
                                Padding="0,10,0,10"
                                BindableLayout.ItemsSource="{Binding Source={RelativeSource AncestorType={x:Type viewmodels:Take5PageViewModel}}, Path=ControlTab.Questions}"
                                BindableLayout.ItemTemplateSelector="{StaticResource submitTabSorResponseSelector}">
                            </StackLayout>
                        </StackLayout>
                    </On>
                    <On Platform="iOS, Android">
                        <Frame HorizontalOptions="FillAndExpand"  VerticalOptions="FillAndExpand" CornerRadius="0" Padding="0">
                            <StackLayout HorizontalOptions="FillAndExpand"  VerticalOptions="FillAndExpand">
                                <Label  
                                    Text="Control &amp; Monitor" 
                                    FontSize="18"
                                    FontAttributes="Bold"
                                    FontFamily="FS-Medium"
                                    Margin="10,20,0,0"
                                    TextColor="{StaticResource VeryDarkBlue}"/>
                                <StackLayout 
                                    HorizontalOptions="FillAndExpand" 
                                    VerticalOptions="FillAndExpand"
                                    Padding="0,10,0,10"
                                    BindableLayout.ItemsSource="{Binding Source={RelativeSource AncestorType={x:Type viewmodels:Take5PageViewModel}}, Path=ControlTab.Questions}"
                                    BindableLayout.ItemTemplateSelector="{StaticResource submitTabSorResponseSelector}">
                                </StackLayout>
                            </StackLayout>
                        </Frame>
                    </On>
                </OnPlatform>
            </StackLayout>
        </DataTemplate>
        <DataTemplate x:Key="responseTake5HazardsSummary">
            <StackLayout HorizontalOptions="FillAndExpand"  VerticalOptions="FillAndExpand">
                <OnPlatform x:TypeArguments="View">
                    <On Platform="WinUI">
                        <StackLayout HorizontalOptions="FillAndExpand"  VerticalOptions="FillAndExpand">
                            <Label  
                                    Text="Hazards" 
                                    FontSize="18"
                                    FontAttributes="Bold"
                                    FontFamily="FS-Medium"
                                    Margin="10,20,0,0"
                                    TextColor="{StaticResource VeryDarkBlue}"/>
                            <StackLayout 
                                    HorizontalOptions="FillAndExpand" 
                                    VerticalOptions="FillAndExpand"
                                    Padding="0,10,0,10"
                                    BindableLayout.ItemsSource="{Binding Source={RelativeSource AncestorType={x:Type viewmodels:Take5PageViewModel}}, Path=HazardTab.Questions}"
                                    BindableLayout.ItemTemplateSelector="{StaticResource submitTabSorResponseSelector}">
                            </StackLayout>
                        </StackLayout>
                    </On>
                    <On Platform="iOS, Android">
                        <Frame HorizontalOptions="FillAndExpand"  VerticalOptions="FillAndExpand" CornerRadius="0" Padding="0">
                            <StackLayout HorizontalOptions="FillAndExpand"  VerticalOptions="FillAndExpand">
                                <Label  
                                    Text="Hazards" 
                                    FontSize="18"
                                    FontAttributes="Bold"
                                    FontFamily="FS-Medium"
                                    Margin="10,20,0,0"
                                    TextColor="{StaticResource VeryDarkBlue}"/>
                                <StackLayout 
                                    HorizontalOptions="FillAndExpand" 
                                    VerticalOptions="FillAndExpand"
                                    Padding="0,10,0,10"
                                    BindableLayout.ItemsSource="{Binding Source={RelativeSource AncestorType={x:Type viewmodels:Take5PageViewModel}}, Path=HazardTab.Questions}"
                                    BindableLayout.ItemTemplateSelector="{StaticResource submitTabSorResponseSelector}">
                                </StackLayout>
                            </StackLayout>
                        </Frame>
                    </On>
                </OnPlatform>
            </StackLayout>
        </DataTemplate>

        <customselectors:SorResponseDataTemplateSelector x:Key="controlTabSorResponseSelector"
                                                         ResponseRadioSingle="{StaticResource responseRadioSingle}"
                                                         ResponseTake5SWMsModal="{StaticResource responseTake5SWMsModal}"/>
        <customselectors:SorResponseDataTemplateSelector x:Key="hazardTabSorResponseSelector"
                                                         ResponseCheckboxSingle="{StaticResource responseCheckboxSingle}"
                                                         ResponseUploadMultiple="{StaticResource responseUploadMultiple}"
                                                         ResponseInputTextArea="{StaticResource responseInputTextArea}" />
        <customselectors:SorResponseDataTemplateSelector x:Key="submitTabSorResponseSelector"
                                                         ResponseRadioSingle="{StaticResource disableResponseRadioSingle}"
                                                         ResponseCheckboxSingle="{StaticResource disableResponseCheckboxSingle}"
                                                         ResponseUploadMultiple="{StaticResource disableResponseUploadMultiple}"
                                                         ResponseInputTextArea="{StaticResource disableResponseInputTextArea}"
                                                         ResponseTake5SWMsModal="{StaticResource disableResponseTake5SWMsModal}"
                                                         ResponseTake5SWMSSummary="{StaticResource responseTake5SWMSSummary}"
                                                         ResponseTake5HazardsSummary="{StaticResource responseTake5HazardsSummary}"/>
    </views:MasterContentPage.Resources>
    <StackLayout VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand">
        <FlexLayout  
                Padding="0" 
                Margin="5" 
                JustifyContent="Center" 
                Wrap="Wrap"
                BindableLayout.ItemsSource="{Binding Steppers}"
                RadioButtonGroup.GroupName="Steppers"
                RadioButtonGroup.SelectedValue="{Binding SelectedStepper}"
                HorizontalOptions="FillAndExpand" >
            <BindableLayout.ItemTemplate>
                <DataTemplate>
                    <RadioButton Content="{Binding .}" Value="{Binding .}" WidthRequest="{OnPlatform WinUI='150'}" HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
                        <RadioButton.ControlTemplate>
                            <ControlTemplate>
                                <StackLayout Spacing="0" HorizontalOptions="Start" VerticalOptions="FillAndExpand">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroupList>
                                            <VisualStateGroup x:Name="CheckedStates">
                                                <VisualState x:Name="Checked">
                                                    <VisualState.Setters>
                                                        <Setter
                                                            TargetName="stepperLayout"
                                                            Property="Path.Fill"
                                                            Value="{StaticResource SecondaryBlue}"/>
                                                        <Setter
                                                            TargetName="stepperLayout"
                                                            Property="Path.Stroke"
                                                            Value="{StaticResource SecondaryBlue}"/>
                                                        <Setter
                                                            TargetName="stepperTitle"
                                                            Property="Label.TextColor"
                                                            Value="{StaticResource LightGrey}"/>
                                                    </VisualState.Setters>
                                                </VisualState>

                                                <VisualState x:Name="Unchecked">
                                                    <VisualState.Setters>
                                                        <Setter
                                                            TargetName="stepperLayout"
                                                            Property="Path.Fill"
                                                            Value="{StaticResource MediumLightBlue}"/>
                                                        <Setter
                                                            TargetName="stepperLayout"
                                                            Property="Path.Stroke"
                                                            Value="{StaticResource MediumLightBlue}"/>
                                                        <Setter
                                                            TargetName="stepperTitle"
                                                            Property="Label.TextColor"
                                                            Value="{StaticResource MediumDarkBlue}"/>
                                                    </VisualState.Setters>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateGroupList>
                                    </VisualStateManager.VisualStateGroups>
                                    <AbsoluteLayout Padding="0" HorizontalOptions="Fill" VerticalOptions="FillAndExpand">
                                        <Path
                                            x:Name="stepperLayout"
                                            AbsoluteLayout.LayoutBounds="0,0"
                                            Stroke="{StaticResource VeryDarkBlue}"
                                            Aspect="Uniform"
                                            HorizontalOptions="CenterAndExpand"
                                            Fill="{StaticResource VeryDarkBlue}">
                                            <Path.Data>
                                                <PathGeometry>
                                                    <PathGeometry.Figures>
                                                        <PathFigureCollection>
                                                            <PathFigure
                                                                        IsClosed="False"
                                                                        StartPoint="0,0">
                                                                <PathFigure.Segments>
                                                                    <LineSegment Point="110,0"></LineSegment>
                                                                    <LineSegment Point="120,25"></LineSegment>
                                                                    <LineSegment Point="110,50"></LineSegment>
                                                                    <LineSegment Point="0,50"></LineSegment>
                                                                    <LineSegment Point="10,25"></LineSegment>
                                                                </PathFigure.Segments>
                                                            </PathFigure>
                                                        </PathFigureCollection>
                                                    </PathGeometry.Figures>
                                                </PathGeometry>
                                            </Path.Data>
                                        </Path>
                                        <Label
                                            x:Name="stepperTitle"
                                            Text="{TemplateBinding Content.Title}"
                                            FontSize="14"
                                            TextColor="{StaticResource MediumLightBlue}"
                                            FontFamily="FS-SemiBold"
                                            TextTransform="Uppercase"
                                            HorizontalOptions="CenterAndExpand"
                                            VerticalOptions="CenterAndExpand"
                                            HorizontalTextAlignment="Center"
                                            VerticalTextAlignment="Center"
                                            AbsoluteLayout.LayoutBounds="0,0,120,50" />
                                    </AbsoluteLayout>
                                </StackLayout>
                            </ControlTemplate>
                        </RadioButton.ControlTemplate>
                    </RadioButton>
                </DataTemplate>
            </BindableLayout.ItemTemplate>
        </FlexLayout>
        <customcontrols:CustomScrollView  HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
            <StackLayout Padding="0" HorizontalOptions="FillAndExpand" Spacing="0" VerticalOptions="FillAndExpand">
                <!--Control Tab-->
                <StackLayout x:Name="controlTab" IsVisible="{Binding ControlTab.IsVisible}"  HorizontalOptions="FillAndExpand" Spacing="0" VerticalOptions="FillAndExpand">
                    <StackLayout 
                        HorizontalOptions="FillAndExpand" 
                        VerticalOptions="FillAndExpand"
                        BindableLayout.ItemsSource="{Binding ControlTab.Questions}"
                        BindableLayout.ItemTemplateSelector="{StaticResource controlTabSorResponseSelector}">
                    </StackLayout>
                </StackLayout>
                
                <!--Hazard Tab-->
                <StackLayout x:Name="hazardTab" IsVisible="{Binding HazardTab.IsVisible}" HorizontalOptions="FillAndExpand" Spacing="0" VerticalOptions="FillAndExpand">
                    <Label  
                        Text="Hazards" 
                        FontSize="18"
                        FontAttributes="Bold"
                        FontFamily="FS-Medium"
                        Margin="10,20,0,0"
                        TextColor="{StaticResource VeryDarkBlue}"/>
                    <StackLayout 
                        HorizontalOptions="FillAndExpand" 
                        VerticalOptions="FillAndExpand"
                        BindableLayout.ItemsSource="{Binding HazardTab.Questions}"
                        BindableLayout.ItemTemplateSelector="{StaticResource hazardTabSorResponseSelector}">
                    </StackLayout>
                </StackLayout>
                
                <!--Submit Tab-->
                <StackLayout x:Name="submitTab" IsVisible="{Binding SubmitTab.IsVisible}" HorizontalOptions="FillAndExpand" Spacing="0" VerticalOptions="FillAndExpand">
                    <StackLayout HorizontalOptions="FillAndExpand" Spacing="0" VerticalOptions="FillAndExpand">
                        <StackLayout
                            HorizontalOptions="FillAndExpand" 
                            VerticalOptions="FillAndExpand"
                            BindableLayout.ItemsSource="{Binding SubmitTab.Questions}"
                            BindableLayout.ItemTemplateSelector="{StaticResource submitTabSorResponseSelector}">
                        </StackLayout>
                    </StackLayout>

                    <StackLayout Margin="0,20,0,0" Orientation="Horizontal" HorizontalOptions="FillAndExpand">
                        <Button Style="{StaticResource ActiveButton}" Margin="10" Text="Submit" Command="{Binding SubmitCommand}" HorizontalOptions="FillAndExpand"/>
                    </StackLayout>
                </StackLayout>
            </StackLayout>
        </customcontrols:CustomScrollView>
    </StackLayout>
</views:MasterContentPage>